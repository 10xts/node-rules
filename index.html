<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Node Rules by mithunsatheesh</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Node Rules</h1>
          <h2>Node-rules is a forward chaining Rules Engine, written on node.js.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/mithunsatheesh/node-rules/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/mithunsatheesh/node-rules/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/mithunsatheesh/node-rules" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <p><a href="https://travis-ci.org/mithunsatheesh/node-rules"><img src="https://api.travis-ci.org/mithunsatheesh/node-rules.svg?branch=master" alt="Build Status"></a>
<a href=""><img src="https://img.shields.io/npm/l/express.svg?style=flat-square" alt="npm"></a>
<a href="http://badge.fury.io/js/node-rules"><img src="https://badge.fury.io/js/node-rules.svg" alt="npm version"></a></p>

<h1>
<a id="node-rules" class="anchor" href="#node-rules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Node Rules</h1>

<p>Node-rules is a light weight forward chaining Rule Engine, written on node.js.</p>

<h4>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h4>

<p>install node-rules via npm</p>

<pre><code>npm install node-rules
</code></pre>

<blockquote>
<p><em>We have improved the API in the 3.x.x version, if you were using the v2.x.x, please find the relevant docs and code base <a href="https://github.com/mithunsatheesh/node-rules/tree/v2.2.3">here</a>. To migrate to 3.0.0 please  read <a href="https://github.com/mithunsatheesh/node-rules/wiki">the wiki here</a>!</em></p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/mithunsatheesh/node-rules/gh-pages/images/screencast.gif" alt="Sample Screencast" title="See it in action"></p>

<h4>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h4>

<p>Node-rules takes rules written in JSON friendly format as input. Once the rule engine is running with rules registered on it, you can feed it facts and the rules will be applied one by one to generate an outcome.</p>

<h6>
<a id="1-defining-a-rule" class="anchor" href="#1-defining-a-rule" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Defining a Rule</h6>

<p>A rule will consist of a condition and its corresponding consequence. You can find the explanation for various mandatory and optional parameters of a rule in <a href="https://github.com/mithunsatheesh/node-rules/wiki/Rules">this wiki</a>.</p>

<pre><code>{
    "condition" : function(R) {
        R.when(this.transactionTotal &lt; 500);
    },
    "consequence" : function(R) {
        this.result = false;
        R.stop();
    },
    "priority" : 4
}
</code></pre>

<p>Here priority is an optional parameter which will be used to specify priority of a rule over other rules when there are multiple rules running. In the above rule <code>R.when</code> evaluates the condition expression and <code>R.stop</code> used to stop further processing of the fact as we have arrived at a result. </p>

<p>The functions <code>R.stop</code>, <code>R.when</code>, <code>R.next</code>, <code>R.restart</code> are part of the Flow Control API which allows user to control the Engine Flow. Read more about  <a href="https://github.com/mithunsatheesh/node-rules/wiki/Flow-Control-API">Flow Controls</a> in <a href="https://github.com/mithunsatheesh/node-rules/wiki">wiki</a>.</p>

<h6>
<a id="2-defining-a-fact" class="anchor" href="#2-defining-a-fact" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Defining a Fact</h6>

<p>Facts are those input json values on which the rule engine applies its rule to obtain results. A fact can have multiple attributes as you decide.</p>

<p>A sample Fact may look like</p>

<pre><code>{
  "name":"user4",
  "application":"MOB2",
  "transactionTotal":400,
  "cardType":"Credit Card",
}
</code></pre>

<h6>
<a id="3-using-the-rule-engine" class="anchor" href="#3-using-the-rule-engine" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. Using the Rule Engine</h6>

<p>The example below shows how to use the rule engine to apply a sample rule on a specific fact. Rules can be fed into the rule engine as Array of rules or as an individual rule object.</p>

<div class="highlight highlight-js"><pre><span class="pl-s">var</span> RuleEngine <span class="pl-k">=</span> <span class="pl-s3">require</span>(<span class="pl-s1"><span class="pl-pds">'</span>node-rules<span class="pl-pds">'</span></span>);

<span class="pl-c">//define the rules</span>
<span class="pl-s">var</span> rules <span class="pl-k">=</span> [{
    <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-en">condition</span><span class="pl-pds">"</span></span>: <span class="pl-st">function</span>(<span class="pl-vpf">R</span>) {
        R.when(<span class="pl-v">this</span> <span class="pl-k">&amp;&amp;</span> (<span class="pl-v">this</span>.transactionTotal <span class="pl-k">&lt;</span> <span class="pl-c1">500</span>));
    },
    <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-en">consequence</span><span class="pl-pds">"</span></span>: <span class="pl-st">function</span>(<span class="pl-vpf">R</span>) {
        <span class="pl-v">this</span>.result <span class="pl-k">=</span> <span class="pl-c1">false</span>;
        R.<span class="pl-s3">stop</span>();
    }
}];

<span class="pl-c">//sample fact to run the rules on   </span>
<span class="pl-s">var</span> fact <span class="pl-k">=</span> {
    <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s1"><span class="pl-pds">"</span>user4<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>application<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s1"><span class="pl-pds">"</span>MOB2<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>transactionTotal<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">400</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>cardType<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s1"><span class="pl-pds">"</span>Credit Card<span class="pl-pds">"</span></span>,
};

<span class="pl-c">//initialize the rule engine</span>
<span class="pl-s">var</span> R <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">RuleEngine</span>(rules);

<span class="pl-c">//Now pass the fact on to the rule engine for results</span>
R.execute(fact,<span class="pl-st">function</span>(<span class="pl-vpf">result</span>){ 

    <span class="pl-k">if</span>(result.result) 
        <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">"</span>Payment Accepted<span class="pl-pds">"</span></span>); 
    <span class="pl-k">else</span> 
        <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">"</span>Payment Rejected<span class="pl-pds">"</span></span>);

});</pre></div>

<h6>
<a id="4-controlling-rules-running-on-the-rule-engine" class="anchor" href="#4-controlling-rules-running-on-the-rule-engine" aria-hidden="true"><span class="octicon octicon-link"></span></a>4. Controlling Rules running on the Rule Engine</h6>

<p>If you are looking for ways to specify the order in which the rules get applied on a fact, it can be done via using the <code>priority</code> parameter. Read more about it in the <a href="https://github.com/mithunsatheesh/node-rules/wiki/Rules">Rule wiki</a>. If you need to know about how to change priority of rules or remove add new rules to a Running Rule Engine, you may read more about it in <a href="https://github.com/mithunsatheesh/node-rules/wiki/Dynamic-Control">Dynamic Control Wiki</a>.</p>

<h6>
<a id="5-exporting-rules-to-an-external-storage" class="anchor" href="#5-exporting-rules-to-an-external-storage" aria-hidden="true"><span class="octicon octicon-link"></span></a>5. Exporting Rules to an external storage</h6>

<p>To read more about storing rules running on the engine to an external DB, refer this <a href="https://github.com/mithunsatheesh/node-rules/wiki/Exporting-and-Importing-Rules">wiki article</a>. </p>

<h4>
<a id="wiki" class="anchor" href="#wiki" aria-hidden="true"><span class="octicon octicon-link"></span></a>Wiki</h4>

<p>To read more about the Rule engine functions, please read <a href="https://github.com/mithunsatheesh/node-rules/wiki">the wiki here</a>!. To find more examples of implementation please look in the <a href="https://github.com/mithunsatheesh/node-rules/tree/master/examples">examples</a> folder.</p>

<h4>
<a id="issues" class="anchor" href="#issues" aria-hidden="true"><span class="octicon octicon-link"></span></a>Issues</h4>

<p>Got issues with the implementation?. Feel free to open an issue <a href="https://github.com/mithunsatheesh/node-rules/issues/new">here</a>.</p>

<h4>
<a id="licence" class="anchor" href="#licence" aria-hidden="true"><span class="octicon octicon-link"></span></a>Licence</h4>

<p>Node rules is distributed under the MIT License.</p>

<h4>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h4>

<p>The JSON friendly rule formats used in version 2.x.x of this module were initially based on the node module <a href="https://github.com/tdegrunt/jools">jools</a>.
The screencast image shown in this page is taken from <a href="http://nmotw.in/node-rules/">nmotv.in</a> which has a pretty nice article on how to use this module!</p>
        </section>

        <footer>
          Node Rules is maintained by <a href="https://github.com/mithunsatheesh">mithunsatheesh</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>